<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<title>HSQLDB Code Switcher</title>
</head>
<body bgcolor=#FFFFFF lang=EN-GB class="Normal">
<h2>HSQLDB  CodeSwitcher</h2>
<p>CodeSwitcher is a tool to manage different version of Java source code. It 
  allows to compile HSQLDB for different JDKs, and switch between debug and runtime 
  versions. It is something like a precompiler in C but it works directly on the 
  source code and does not create intermediate output or extra files. </p>
<p>CodeSwitcher is used internally in HSQLDB build scripts. You do not have to 
  use it separately to compile HSQLDB.</p>
<p>CodeSwitcher reads the source code of a file, removes comments where appropriate 
  and comments out the blocks that are not used for a particular version of the 
  file. This operation is done for all files of a defined directory, and all subdirectories. 
</p>
<p>This is an example source code before CodeSwitcher is used: </p>
<pre><code>&nbsp;</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</code></pre>
<pre><code>//#ifdef JAVA2</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; properties.store(out,&quot;hsqldb database&quot;);</code></pre>
<pre><code>//#else</code></pre>
<pre><code>/*</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; properties.save(out,&quot;hsqldb database&quot;);</code></pre>
<pre><code>*/</code></pre>
<pre><code>//#endif</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</code></pre>
<p>The next step is to run CodeSwitcher. This is done using the command line: 
</p>
<p><code><span style='font-size:10.0pt;font-family:"Courier New"'>java org.hsqldb.util.CodeSwitcher 
  . -JAVA2</span></code> </p>
<p>The '.' means the program works on the current directory (all subdirectories 
  are processed recursively). '-JAVA2' means the code labelled with JAVA2 must 
  be switched off. And this is how the source code looks after CodeSwitcher has 
  processed this file: </p>
<pre><code>&nbsp;</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</code></pre>
<pre><code>//#ifdef JAVA2</code></pre>
<pre><code>/*</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pProperties.store(out,&quot;hsqldb database&quot;);</code></pre>
<pre><code>*/</code></pre>
<pre><code>//#else</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pProperties.save(out,&quot;hsqldb database&quot;);</code></pre>
<pre><code>//#endif</code></pre>
<pre><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</code></pre>
<p>For detailed information on the command line options run 'java org.hsqldb.util.CodeSwitcher'. 
  Usage examples can be found in the switchtojdk1*.bat files in the /build directory.</p>
<p><font size="-1">This text is based on HypersonicSQL documentation, updated to reflect the latest version of HSQLDB</font>
</p>
</body>
</html>
